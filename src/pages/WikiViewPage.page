<apex:page docType="html-5.0" showHeader="true" sidebar="false" standardStylesheets="false" controller="WikiViewPageController" title="Wiki View Page">
<link rel="stylesheet" type="text/css" href="{!UrlFor($resource.HighLight,'HighLight/styles/default.css')}"/>
<title>Wiki View Page</title>
    <style>
        .content {
            padding: 0 25px;
            margin: 0 auto;
            width: 960px;
            border: 0;
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
            font-size: 14px;
            line-height: 20px;
            color: #333333;
            background-color: #ffffff;
        }

        .page-body {
            padding-bottom: 15px;
        } 

        #force .page-header h1 {
            color: #5a5a5a;
            font-size: 38.5px;
        }

        .page-metadata {
            font-size: 12px;
            padding-left: 10px;
            padding-top: 12px;
        }
        .feedpage .feedrightbar{margin-right: 0px;}
        .btn-default1{
            color: #333333;
            background-color: #fdfdfd;
            border-color: #cccccc;
            display: inline-block;
            padding: 6px 12px;
            margin-bottom: 0;
             font-size: 14px;
            font-weight: normal;
            line-height: 1.428571429;
            text-align: center;
             white-space: nowrap;
            vertical-align: middle;
            cursor: pointer;
            background-image: none;
            border: 1px solid #cbcbcb;
            border-radius: 4px;
            -webkit-user-select: none;
        }
        .btn-primary1{
            color: #ffffff;
            background-color: #4eaddf;
            border-color: #357ebd;
            
            display: inline-block;
            padding: 6px 12px;
            margin-bottom: 0;
            font-size: 14px;
            font-weight: normal;
            line-height: 1.428571429;
            text-align: center;
            white-space: nowrap;
            vertical-align: middle;
            cursor: pointer;
            background-image: none;
            border: 1px solid #cbcbcb;
            border-radius: 4px;            
        }
        .publishercontainer .bottomBar
        {
            padding: 5px;
            height: 40px;
        }

    </style>

    <script>
        $(document).ready(function($) {
            new Editor($("#text-input"), $("#page-body"));
            $("pre,code").css("font-family","Menlo");
            $("#editid").bind('mouseenter', function(event) {
                $(this).removeClass().addClass("btn-primary1 pull-right").css("background-color","#428bca").css("text-decoration","none");
            });
            $("#editid").bind('mouseout', function(event) {        
                $(this).removeClass().addClass("btn-default1 pull-right").css("background-color","#fdfdfd");
            });
            $(".glyphicon-pencil").bind('mouseenter', function() {$("#editid").mouseenter();});
            $(".glyphicon-pencil").bind('mouseout', function() {});
        });


        function Editor(input, preview)
        {
            this.update = function () {
              preview.html(markdown.toHTML(input.val()));
            }
            input.editor = this;
            this.update();
        }
       
    </script>
    <apex:form>
        <apex:actionFunction name="vote" action="{!vote}" reRender="voteArea">
            <apex:param assignTo="{!VoteParam}" name="vote1" value=""/>
        </apex:actionFunction>
    </apex:form>
    <apex:composition template="WikiTemplateWithBootstrap3"><!--WikiTemplateWithBootstrap3-->
        <apex:define name="body" >
            <div class="content" style=" background-color: f9f9f9;">
                <div id="force" >
                    <div class="navbar ">
                        <ul class="breadcrumb">
                            <li>
                                <a href="{!$Page.WikiHome}">Wiki Home</a>
                            </li>
                            <li>
                                <a href="/apex/wikispace?id={!PubPage.WikiPage.WikiSpace__c}">{!PubPage.WikiPage.WikiSpace__r.Name}</a> 
                            </li>
                            <li class="active">{!PubPage.WikiPageVersion.Title__c}</li>
                        </ul>
                    </div>
                    <div class="page-header">
                        <h1>{!PubPage.WikiPageVersion.Title__c}</h1><a id="editid" href='/apex/WikiNewPage?id={!PubPage.WikiPage.Id}' type="button" class="btn-default1 pull-right"><span class="glyphicon glyphicon-pencil"></span> &nbsp;&nbsp;Edit</a>
                        <div class="page-metadata muted">
                            Added by
                            <a href="/display/~vidya
                            " class="url fn confluence-userlink userlink-0" data-username="vidya" title="" data-user-hover-bound="true">
                                <apex:outputField value="{!PubPage.WikiPage.CreatedById}"/>
                            </a>,
                            last edited by
                            <a href="    /display/~rrobins
                            " class="url fn confluence-userlink userlink-1" data-username="rrobins" title="" data-user-hover-bound="true">
                                <apex:outputField value="{!PubPage.WikiPage.LastModifiedById}"/>
                            </a>
                            on
                            <apex:outputText value="{0, date, yyyy.MM.dd }">
                               <apex:param value="{!PubPage.WikiPage.LastPublishedDate__c}" />
                           </apex:outputText>
                        </div>
                    </div>

                                     <hr/>                  
                    <div id="page-body" class="page-body"></div>                
                    <hr/>
                </div>            
                <!-- Chatter -->
                <chatter:feedWithFollowers entityId="{!PubPage.WikiPage.Id}"/>
            </div>            
        </apex:define>
    </apex:composition>

    <!-- The data of markdown for js to parse -->
    <textarea id="text-input" rows="6" cols="60" style="display:none">
        <apex:outputText value="{!PubPage.WikiPageVersion.Body__c}" escape="false"/>
    </textarea>
    <script type="text/javascript" src="{!UrlFor($resource.HighLight,'HighLight/highlight.pack.js')}"></script>
    <script >
       // $("pre code *").removeClass();
        hljs.initHighlightingOnLoad();
    </script> 
</apex:page>